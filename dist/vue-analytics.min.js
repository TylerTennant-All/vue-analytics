/*!
 * vue-analytics v2.4.0
 * (c) 2017 Matteo Gabriele
 * Released under the ISC License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VueAnalytics=t()}(this,function(){"use strict";var e=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn("[VueAnalytics] "+t.join(" "))},t=function(e){return!(!o.ignoreRoutes.length||o.ignoreRoutes.indexOf(e)===-1)},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={debug:{enabled:!1,trace:!1,sendHitTask:!0},autoTracking:!0,id:null,userId:null,manual:!1,ignoreRoutes:[]},a=function e(t,o){return Object.keys(o).forEach(function(a){return t[a]&&"object"===n(t[a])?void e(t[a],o[a]):void(t[a]=o[a])}),t},i=function(t){if("boolean"==typeof t.debug){var n="https://github.com/MatteoGabriele/vue-analytics#debug";e("Please use the new debug setup",n)}return a(o,t)},r=function(){if("undefined"!=typeof window.ga){for(var t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];if(o.length)return"object"===n(o[0])&&o[0].constructor===Object?void window.ga("set",o[0]):o.length<2||"string"!=typeof o[0]&&"string"!=typeof o[1]?void e("$ga.set needs a field name and a field value, or you can pass an object literal"):void window.ga("set",o[0],o[1])}},u=function(){return new Promise(function(e,t){var n=document.createElement("script"),a=o.userId||{},i=o.debug.enabled?"_debug":"",u="https://www.google-analytics.com/analytics"+i+".js",d=document.getElementsByTagName("script")[0];n.async=1,d.parentNode.insertBefore(n,d),n.onload=n.onreadystatechange=function(i,u){if(u||!n.readyState||/loaded|complete/.test(n.readyState)){if(n.onload=n.onreadystatechange=null,n=void 0,u)return t({error:!0,id:o.id});o.debug.enabled&&(window.ga_debug={trace:o.debug.trace}),window.ga("create",o.id,"auto",a),o.debug.sendHitTask||r("sendHitTask",null),window.ga("send","pageview"),e({success:!0,id:o.id})}},n.src=u})},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"!=typeof window.ga&&window.ga("send","pageview",{page:e,title:t,location:n})},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"undefined"!=typeof window.ga&&window.ga("send","event",e,t,n,o)},l=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";"undefined"!=typeof window.ga&&window.ga("send","timing",e,t,n,o)},s=function(n){if(o.manual&&!n&&o.autoTracking){var a="https://github.com/MatteoGabriele/vue-analytics#auto-tracking";return void e("auto-tracking doesn't work without a router instance.",a)}if(o.autoTracking&&n){var i=n.currentRoute;t(i.name)||d(i.path,i.name,window.location.href),n.afterEach(function(e){var n=e.path,o=e.name;t(o)||d(n,o,window.location.href)})}},f=function(t,n){if(!o.manual){if(!o.id){var a="https://github.com/MatteoGabriele/vue-analytics#usage";return void e("Please enter a Google Analaytics tracking ID",a)}u().then(function(o){return o.error?void e("Ops! Could't load the Google Analytics script"):(n&&"function"==typeof n&&n(),void s(t))})}},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.router;delete t.router,i(t),f(n,t.onAnalyticsReady);var o={trackEvent:c,trackPage:d,trackTime:l,set:r};e.prototype.$ga=e.$ga=o},y={install:g,loadScript:u,autoTracking:s};return y});