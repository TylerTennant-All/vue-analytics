/*!
 * vue-analytics v2.3.1
 * (c) 2017 Matteo Gabriele
 * Released under the ISC License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VueAnalytics=t()}(this,function(){"use strict";var e=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn("[VueAnalytics] "+t.join(" "))},t=function(e){return!(!n.ignoreRoutes.length||n.ignoreRoutes.indexOf(e)===-1)},n={debug:{enabled:!1,trace:!1,sendHitTask:!0},autoTracking:!0,id:null,userId:null,manual:!1,ignoreRoutes:[]},o=function(e,t){return Object.keys(t).forEach(function(n){e[n]=t[n]}),e},a=function(t){if("boolean"==typeof t.debug){var a="https://github.com/MatteoGabriele/vue-analytics#debug";e("Please use the new debug setup",a)}return o(n,t)},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){if("undefined"!=typeof window.ga){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];if(n.length)return"object"===i(n[0])&&n[0].constructor===Object?void window.ga("set",n[0]):n.length<2||"string"!=typeof n[0]&&"string"!=typeof n[1]?void e("$ga.set needs a field name and a field value, or you can pass an object literal"):void window.ga("set",n[0],n[1])}},u=function(){return new Promise(function(e,t){var o=document.createElement("script"),a=n.userId||{},i=n.debug.enabled?"_debug":"",u="https://www.google-analytics.com/analytics"+i+".js",d=document.getElementsByTagName("script")[0];o.async=1,d.parentNode.insertBefore(o,d),o.onload=o.onreadystatechange=function(i,u){if(u||!o.readyState||/loaded|complete/.test(o.readyState)){if(o.onload=o.onreadystatechange=null,o=void 0,u)return t({error:!0,id:n.id});n.debug.enabled&&(window.ga_debug={trace:n.debug.trace}),window.ga("create",n.id,"auto",a),n.debug.sendHitTask||r("sendHitTask",null),window.ga("send","pageview"),e({success:!0,id:n.id})}},o.src=u})},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"!=typeof window.ga&&window.ga("send","pageview",{page:e,title:t,location:n})},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"undefined"!=typeof window.ga&&window.ga("send","event",e,t,n,o)},l=function(o){if(n.manual&&!o&&n.autoTracking){var a="https://github.com/MatteoGabriele/vue-analytics#auto-tracking";return void e("auto-tracking doesn't work without a router instance.",a)}if(n.autoTracking&&o){var i=o.currentRoute;t(i.name)||d(i.path,i.name,window.location.href),o.afterEach(function(e){var n=e.path,o=e.name;t(o)||d(n,o,window.location.href)})}},s=function(t,o){if(!n.manual){if(!n.id){var a="https://github.com/MatteoGabriele/vue-analytics#usage";return void e("Please enter a Google Analaytics tracking ID",a)}u().then(function(n){return n.error?void e("Ops! Could't load the Google Analytics script"):(o&&"function"==typeof o&&o(),void l(t))})}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.router;delete t.router,a(t),s(n,t.onAnalyticsReady);var o={trackEvent:c,trackPage:d,set:r};e.$ga=o,e.prototype.$ga=o},g={install:f,loadScript:u,autoTracking:l};return g});