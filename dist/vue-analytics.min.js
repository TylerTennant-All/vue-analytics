/*!
 * vue-analytics v2.2.0
 * (c) 2017 Matteo Gabriele
 * Released under the ISC License.
 */
!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("lodash.merge")):"function"==typeof define&&define.amd?define(["lodash.merge"],o):e.VueAnalytics=o(e.merge)}(this,function(e){"use strict";e="default"in e?e.default:e;var o={debug:!1,autoTracking:!0,id:null,userId:null,manual:!1,ignoreRoutes:[]},n=function(n){return e(o,n)},t=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"!=typeof window.ga&&(o.debug&&(console.groupCollapsed('[VueAnalytics] Track page "'+e+'"'),console.log("page: "+e),console.log("title: "+n),console.log("location: "+t),console.groupEnd()),window.ga("send","pageview",{page:e,title:n,location:t}))},a=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"undefined"!=typeof window.ga&&(o.debug&&(console.groupCollapsed('[VueAnalytics] Track event category "'+e+'"'),console.log("category: "+e),console.log("action: "+n),console.log("label: "+t),console.log("value: "+a),console.groupEnd()),window.ga("send","event",e,n,t,a))},r=function(){for(var e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];console.warn("[VueAnalytics] "+o.join(" "))},i=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,t){var a=document.createElement("script"),r=document.getElementsByTagName("script")[0];a.async=1,r.parentNode.insertBefore(a,r),a.onload=a.onreadystatechange=function(r,i){if(i||!a.readyState||/loaded|complete/.test(a.readyState)){if(a.onload=a.onreadystatechange=null,a=void 0,i)return void t({error:!0});window.ga("create",e,"auto",o),window.ga("send","pageview"),n({success:!0,id:e})}},a.src="https://www.google-analytics.com/analytics.js"})},l=function(e){return!(!o.ignoreRoutes.length||o.ignoreRoutes.indexOf(e)===-1)},c=function(e){if(o.manual&&!e&&o.autoTracking){var n="https://github.com/MatteoGabriele/vue-analytics#auto-tracking";return void r("auto-tracking doesn't work without a router instance.",n)}if(o.autoTracking&&e){var a=e.currentRoute;l(a.name)||t(a.path,a.name,window.location.href),e.afterEach(function(e){var o=e.path,n=e.name;l(n)||t(o,n,window.location.href)})}},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){if("undefined"!=typeof window.ga){for(var e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];if(o.length){if("object"===u(o[0])&&o[0].constructor===Object){console.groupCollapsed("[VueAnalytics] Set");var t=o[0];for(var a in t)console.log(a+": "+t[a]);return console.groupEnd(),void window.ga("set",t)}if(o.length<2||"string"!=typeof o[0]&&"string"!=typeof o[1])return void r("$ga.set needs a field name and a field value, or you can pass an object literal");console.groupCollapsed("[VueAnalytics] Set"),console.log("Field name: "+o[0]),console.log("Field value: "+o[1]),console.groupEnd(),window.ga("set",o[0],o[1])}}},d=function(e,n){if(!o.manual){if(!o.id){var t="https://github.com/MatteoGabriele/vue-analytics#usage";return void r("Please enter a Google Analaytics tracking ID",t)}var a={};o.userId&&(a.userId=o.userId),i(o.id,a).then(function(o){return o.error?void r("Ops! Could't load the Google Analytics script"):(n&&"function"==typeof n&&n(),void c(e))})}},g=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.router;delete o.router,n(o),d(r,o.onAnalyticsReady);var i={trackEvent:a,trackPage:t,set:s};e.$ga=i,e.prototype.$ga=i},f={install:g,loadScript:i,autoTracking:c};return f});