/*!
 * vue-analytics v2.3.0
 * (c) 2017 Matteo Gabriele
 * Released under the ISC License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("lodash.merge")):"function"==typeof define&&define.amd?define(["lodash.merge"],t):e.VueAnalytics=t(e.merge)}(this,function(e){"use strict";e="default"in e?e.default:e;var t=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn("[VueAnalytics] "+t.join(" "))},n=function(e){return!(!o.ignoreRoutes.length||o.ignoreRoutes.indexOf(e)===-1)},o={debug:{enabled:!1,trace:!1,sendHitTask:!0},autoTracking:!0,id:null,userId:null,manual:!1,ignoreRoutes:[]},a=function(n){if("boolean"==typeof n.debug){var a="https://github.com/MatteoGabriele/vue-analytics#debug";t("Please use the new debug setup",a)}return e(o,n)},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){if("undefined"!=typeof window.ga){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];if(n.length)return"object"===i(n[0])&&n[0].constructor===Object?void window.ga("set",n[0]):n.length<2||"string"!=typeof n[0]&&"string"!=typeof n[1]?void t("$ga.set needs a field name and a field value, or you can pass an object literal"):void window.ga("set",n[0],n[1])}},u=function(){return new Promise(function(e,t){var n=document.createElement("script"),a=o.userId||{},i=o.debug.enabled?"_debug":"",u="https://www.google-analytics.com/analytics"+i+".js",d=document.getElementsByTagName("script")[0];n.async=1,d.parentNode.insertBefore(n,d),n.onload=n.onreadystatechange=function(i,u){if(u||!n.readyState||/loaded|complete/.test(n.readyState)){if(n.onload=n.onreadystatechange=null,n=void 0,u)return t({error:!0,id:o.id});o.debug.enabled&&(window.ga_debug={trace:o.debug.trace}),window.ga("create",o.id,"auto",a),o.debug.sendHitTask||r("sendHitTask",null),window.ga("send","pageview"),e({success:!0,id:o.id})}},n.src=u})},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"!=typeof window.ga&&window.ga("send","pageview",{page:e,title:t,location:n})},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"undefined"!=typeof window.ga&&window.ga("send","event",e,t,n,o)},l=function(e){if(o.manual&&!e&&o.autoTracking){var a="https://github.com/MatteoGabriele/vue-analytics#auto-tracking";return void t("auto-tracking doesn't work without a router instance.",a)}if(o.autoTracking&&e){var i=e.currentRoute;n(i.name)||d(i.path,i.name,window.location.href),e.afterEach(function(e){var t=e.path,o=e.name;n(o)||d(t,o,window.location.href)})}},s=function(e,n){if(!o.manual){if(!o.id){var a="https://github.com/MatteoGabriele/vue-analytics#usage";return void t("Please enter a Google Analaytics tracking ID",a)}u().then(function(o){return o.error?void t("Ops! Could't load the Google Analytics script"):(n&&"function"==typeof n&&n(),void l(e))})}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.router;delete t.router,a(t),s(n,t.onAnalyticsReady);var o={trackEvent:c,trackPage:d,set:r};e.$ga=o,e.prototype.$ga=o},g={install:f,loadScript:u,autoTracking:l};return g});