/*!
 * vue-analytics v1.4.1
 * (c) 2017 Matteo Gabriele
 * Released under the ISC License.
 */
!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("lodash.merge")):"function"==typeof define&&define.amd?define(["lodash.merge"],o):e.VueAnalytics=o(e.merge)}(this,function(e){"use strict";e="default"in e?e.default:e;var o={debug:!1,autoTracking:!0,id:"UA-XXX-X",manual:!1,ignoreRoutes:[]},n=function(n){return e(o,n)},t=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"!=typeof window.ga&&(o.debug&&(console.groupCollapsed('[VueAnalytics] Track page "'+e+'"'),console.log("page: "+e),console.log("title: "+n),console.log("location: "+t),console.groupEnd()),window.ga("send","pageview",{page:e,title:n,location:t}))},a=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"undefined"!=typeof window.ga&&(o.debug&&(console.groupCollapsed('[VueAnalytics] Track event category "'+e+'"'),console.log("category: "+e),console.log("action: "+n),console.log("label: "+t),console.log("value: "+a),console.groupEnd()),window.ga("send","event",e,n,t,a))},i=function(e){console.warn("[VueAnalytics] "+e)},r=function(e){return new Promise(function(o,n){var t=document.createElement("script"),a=document.getElementsByTagName("script")[0];t.async=1,a.parentNode.insertBefore(t,a),t.onload=t.onreadystatechange=function(a,i){if(i||!t.readyState||/loaded|complete/.test(t.readyState)){if(t.onload=t.onreadystatechange=null,t=void 0,i)return void n({error:!0});window.ga("create",e,"auto"),o({success:!0,id:e})}},t.src="//www.google-analytics.com/analytics.js"})},u=function(e){return!(!o.ignoreRoutes.length||o.ignoreRoutes.indexOf(e)===-1)},c=function(e){if(!e&&o.autoTracking)return void i("You need to pass the VueRouter instance in the plugin options");if(!e&&!o.autoTracking)return void i("You need to pass the VueRouter instance to the autoTracking method or turn on auto mode");var n=e.currentRoute;u(n.name)||t(n.path,n.name,window.location.href),e.afterEach(function(e){var o=e.path,n=e.name;u(n)||t(o,n,window.location.href)})},l=function(e){o.manual||r(o.id).then(function(n){return n.error?void i("Ops! Could't load the Google Analytics script"):void(o.autoTracking&&c(e))})},d=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n({autoTracking:o.autoTracking,debug:o.debug,id:o.id,manual:o.manual,ignoreRoutes:o.ignoreRoutes}),e.$ga={trackEvent:a,trackPage:t},e.prototype.$ga={trackEvent:a,trackPage:t},l(o.router)},g={install:d,loadScript:r,autoTracking:c};return g});