/*!
 * vue-analytics v2.1.1
 * (c) 2017 Matteo Gabriele
 * Released under the ISC License.
 */
!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("lodash.merge")):"function"==typeof define&&define.amd?define(["lodash.merge"],o):e.VueAnalytics=o(e.merge)}(this,function(e){"use strict";e="default"in e?e.default:e;var o={debug:!1,autoTracking:!0,id:null,manual:!1,ignoreRoutes:[]},n=function(n){return e(o,n)},t=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"!=typeof window.ga&&(o.debug&&(console.groupCollapsed('[VueAnalytics] Track page "'+e+'"'),console.log("page: "+e),console.log("title: "+n),console.log("location: "+t),console.groupEnd()),window.ga("send","pageview",{page:e,title:n,location:t}))},a=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"undefined"!=typeof window.ga&&(o.debug&&(console.groupCollapsed('[VueAnalytics] Track event category "'+e+'"'),console.log("category: "+e),console.log("action: "+n),console.log("label: "+t),console.log("value: "+a),console.groupEnd()),window.ga("send","event",e,n,t,a))},i=function(){for(var e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];console.warn("[VueAnalytics] "+o.join(" "))},r=function(e){return new Promise(function(o,n){var t=document.createElement("script"),a=document.getElementsByTagName("script")[0];t.async=1,a.parentNode.insertBefore(t,a),t.onload=t.onreadystatechange=function(a,i){if(i||!t.readyState||/loaded|complete/.test(t.readyState)){if(t.onload=t.onreadystatechange=null,t=void 0,i)return void n({error:!0});window.ga("create",e,"auto"),o({success:!0,id:e})}},t.src="https://www.google-analytics.com/analytics.js"})},c=function(e){return!(!o.ignoreRoutes.length||o.ignoreRoutes.indexOf(e)===-1)},l=function(e){if(o.manual&&!e&&o.autoTracking){var n="https://github.com/MatteoGabriele/vue-analytics#auto-tracking";return void i("auto-tracking doesn't work without a router instance.",n)}if(o.autoTracking&&e){var a=e.currentRoute;c(a.name)||t(a.path,a.name,window.location.href),e.afterEach(function(e){var o=e.path,n=e.name;c(n)||t(o,n,window.location.href)})}},u=function(e,n){if(!o.manual){if(!o.id){var t="https://github.com/MatteoGabriele/vue-analytics#usage";return void i("Please enter a Google Analaytics tracking ID",t)}r(o.id).then(function(o){return o.error?void i("Ops! Could't load the Google Analytics script"):(n&&"function"==typeof n&&n(),void l(e))})}},d=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.router;delete o.router,n(o),u(i,o.onAnalyticsReady),e.$ga={trackEvent:a,trackPage:t},e.prototype.$ga={trackEvent:a,trackPage:t}},s={install:d,loadScript:r,autoTracking:l};return s});